{"version":3,"file":"wpstg-admin-pro.min.js","sources":["../../src/modules/wpstg-dom-utils.js","../../src/pro/modules/wpstg-clone-edit.js","../../src/modules/wpstg-hover-intent.js","../../src/pro/wpstg-admin-pro.js","../../src/wpstg.js"],"sourcesContent":["/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n","\nimport * as dom from './../../modules/wpstg-dom-utils.js';\n\n// Delay time in millisecond after which the request is send to check db connection\n// This is to make sure we have not many ajax request even when they were not required i.e. while typing.\nexport const DELAY_TIME_DB_CHECK = 300;\nexport default class WpstgCloneEdit {\n  constructor(\n      workflowSelector = '#wpstg-workflow',\n      dbCheckTriggerClass = '.wpstg-edit-clone-db-inputs',\n      wpstgObject = wpstg,\n      databaseCheckAction = 'wpstg_database_connect',\n  ) {\n    this.workflow = dom.qs(workflowSelector);\n    this.dbCheckTriggerClass = dbCheckTriggerClass;\n    this.wpstgObject = wpstgObject;\n    this.databaseCheckAction = databaseCheckAction;\n    this.dbCheckTimer = null;\n    this.abortDbCheckController = null;\n    this.dbCheckCallStatus = false;\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    // early bail if workflow object not available.\n    if (this.workflow === null) {\n      return;\n    }\n\n    ['paste', 'input'].forEach( (evt) => {\n      dom.addEvent(this.workflow, evt, this.dbCheckTriggerClass, () => {\n        // abort previous database check call if it was running\n        if (this.dbCheckCallStatus === true) {\n          this.abortDbCheckController.abort();\n          this.abortDbCheckController = null;\n          this.dbCheckCallStatus = false;\n        }\n\n        // check for db connection after specific delay but reset the timer if these event occur again\n        clearTimeout(this.dbCheckTimer);\n        this.dbCheckTimer = setTimeout(() => {\n          this.checkDatabase();\n        }, DELAY_TIME_DB_CHECK);\n      });\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  checkDatabase() {\n    const idPrefix = '#wpstg-edit-clone-data-';\n    const externalDBUser = dom.qs(idPrefix + 'database-user').value;\n    const externalDBPassword = dom.qs(idPrefix + 'database-password').value;\n    const externalDBDatabase = dom.qs(idPrefix + 'database-database').value;\n    const externalDBHost = dom.qs(idPrefix + 'database-server').value;\n    const externalDBPrefix = dom.qs(idPrefix + 'database-prefix').value;\n\n    if (externalDBUser === '' && externalDBPassword === '' && externalDBDatabase === '' && externalDBPrefix === '') {\n      dom.qs('#wpstg-save-clone-data').disabled = false;\n      return;\n    }\n\n    this.abortDbCheckController = new AbortController();\n    this.dbCheckCallStatus = true;\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      signal: this.abortDbCheckController.signal,\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.databaseCheckAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        databaseUser: externalDBUser,\n        databasePassword: externalDBPassword,\n        databaseServer: externalDBHost,\n        databaseDatabase: externalDBDatabase,\n        databasePrefix: externalDBPrefix,\n        databaseEnsurePrefixTableExist: true,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      this.dbCheckCallStatus = false;\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // dismiss previous toasts\n      this.notyf.dismissAll();\n      // failed request\n      if (false === data) {\n        this.notyf.error(this.wpstgObject.i18n['dbConnectionFailed']);\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // failed db connection\n      if ('undefined' !== typeof (data.errors) && data.errors && 'undefined' !== typeof (data.success) && data.success === 'false') {\n        this.notyf.error(this.wpstgObject.i18n['dbConnectionFailed'] +'! <br/> Error: '+ data.errors);\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // prefix warning\n      if ('undefined' !== typeof (data.errors) && data.errors && 'undefined' !== typeof (data.success) && data.success === 'true') {\n        this.notyf.open({\n          type: 'warning',\n          message: 'Warning: ' + data.errors,\n        });\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // db connection successful\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.notyf.success(this.wpstgObject.i18n['dbConnectionSuccess']);\n        dom.qs('#wpstg-save-clone-data').disabled = false;\n      }\n    }).catch((error) => {\n      this.dbCheckCallStatus = false;\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n      dom.qs('#wpstg-save-clone-data').disabled = true;\n    });\n  }\n}\n","'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","import WpstgCloneEdit from './modules/wpstg-clone-edit.js';\nimport WPStagingCommon from '../wpstg.js';\n\nconst WPStagingPro = function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n  };\n\n  // Cache Elements\n  const cache = {elements: []};\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n\n  /**\n     * Ajax Scanning before starting push process\n     */\n  const startScanning = function() {\n    // Scan db and file system\n    const $workFlow = cache.get('#wpstg-workflow');\n\n\n    $workFlow\n    // Load scanning data\n        .on('click', '.wpstg-push-changes', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          // Disable button\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          // Add loading overlay\n          $workFlow.addClass('loading');\n\n          // Get clone id\n          // var cloneID = $this.data(\"clone\");\n          // Get clone id\n          const cloneID = $(this).data('clone');\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_scan',\n            clone: cloneID,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          // Send ajax request\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                                'and try again. If that does not help, ' +\n                                '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n                  );\n                }\n\n                // Styling of elements\n                $workFlow.removeClass('loading').html(response);\n\n                WPStaging.switchStep(2);\n\n                cache.get('.wpstg-step3-cloning').hide();\n                cache.get('.wpstg-step3-pushing').show();\n\n                cache.get('.wpstg-loader').hide();\n                // cache.get(\".wpstg-loader\").hide();\n              },\n              'HTML',\n          );\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          WPStaging.loadOverview();\n        })\n        .on('click', '#wpstg-use-target-dir', function(e) {\n          e.preventDefault();\n          $('#wpstg_clone_dir').val(this.getAttribute('data-path'));\n        })\n        .on('click', '#wpstg-use-target-hostname', function(e) {\n          e.preventDefault();\n          $('#wpstg_clone_hostname').val(this.getAttribute('data-uri'));\n        })\n        .on('change', '#wpstg-delete-upload-before-pushing', function(e) {\n          if (e.currentTarget.checked) {\n            $('#wpstg-backup-upload-container').show();\n          } else {\n            $('#wpstg-backup-upload-container').hide();\n            $('#wpstg-backup-upload-before-pushing').removeAttr('checked');\n          }\n        });\n  };\n\n\n  // Start the whole pushing process\n  const startProcess = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    // Click push changes button\n    $workFlow.on('click', '#wpstg-push-changes', function(e) {\n      e.preventDefault();\n\n      // Hide db tables and folder selection\n      cache.get('.wpstg-tabs-wrapper').hide();\n      cache.get('#wpstg-push-changes').hide();\n\n      // Show confirmation modal\n      const cloneID = cache.get('#wpstg-push-changes').data('clone');\n      const html = '<p class=\\'wpstg-push-confirmation-message\\'><b>WAIT!</b> This will overwrite the production/live site and its plugins, themes and media assets with data from the staging site: <b>\"' + cloneID + '\"</b>.  <br/><br/>Database data will be overwritten for each selected table. Take care if you use a shop system like WooCommerce and check out our FAQ! <br/><br/><b>IMPORTANT:</b> Before you proceed make sure that you have a full site backup. If the pushing process is not successful contact us at <a href=\\'mailto:support@wp-staging.com\\'>support@wp-staging.com</a> or use the <b>REPORT ISSUE</b> button.</p>';\n\n      confirmModal('Confirm Push!', html, 'Push', 'wpstg-confirm-push').then(function(result) {\n        if (result.value) {\n          cache.get('#wpstg-push-changes').attr('disabled', true);\n          cache.get('.wpstg-prev-step-link').attr('disabled', true);\n          cache.get('#wpstg-scanning-files').hide();\n          cache.get('.wpstg-progress-bar-wrapper').show();\n          WPStaging.switchStep(3);\n          window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n          processing();\n\n          return;\n        }\n\n        // Show db tables and folder selection\n        cache.get('.wpstg-tabs-wrapper').show();\n        cache.get('#wpstg-push-changes').show();\n      });\n    });\n  };\n\n  /**\n     * Start ajax processing\n     * @return string\n     */\n  var processing = function() {\n    // Show loader gif\n    cache.get('.wpstg-loader').show();\n\n    // Show logging window\n    cache.get('.wpstg-log-details').show();\n\n    // Get clone id\n    const cloneID = cache.get('#wpstg-push-changes').data('clone');\n\n    const deleteUploadsBeforePush = cache.get('#wpstg-delete-upload-before-pushing')[0].checked;\n    let backupUploadsBeforePush = false;\n    if (deleteUploadsBeforePush) {\n      backupUploadsBeforePush = cache.get('#wpstg-backup-upload-before-pushing')[0].checked;\n    }\n\n    WPStaging.ajax(\n        {\n          action: 'wpstg_push_processing',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          clone: cloneID,\n          excludedTables: getExcludedTables(),\n          includedDirectories: getIncludedDirectories(),\n          excludedDirectories: getExcludedDirectories(),\n          extraDirectories: getIncludedExtraDirectories(),\n          createBackupBeforePushing: cache.get('#wpstg-create-backup-before-pushing')[0].checked,\n          deletePluginsAndThemes: cache.get('#wpstg-remove-uninstalled-plugins-themes')[0].checked,\n          deleteUploadsBeforePushing: deleteUploadsBeforePush,\n          backupUploadsBeforePushing: backupUploadsBeforePush,\n        },\n        function(response) {\n          // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                        'and try again. If that does not help, ' +\n                        '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' !== typeof (response.error) && response.error) {\n            WPStaging.showError(\n                'Something went wrong! Error: ' + response.message + '.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                        'and try again. If that does not help, ' +\n                        '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n\n          // Add Log messages\n          if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n            WPStaging.getLogs(response.last_msg);\n          }\n\n          // Continue processing\n          if (false === response.status) {\n            progressBar(response);\n            setTimeout(function() {\n              cache.get('.wpstg-loader').show();\n              processing();\n            }, wpstg.delayReq);\n          } else if (true === response.status) {\n            progressBar(response);\n            processing();\n          } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            isFinished(response);\n          }\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n     * Test database connection\n     * @return object\n     */\n  const connectDatabase = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    $workFlow.on('click', '#wpstg-db-connect', function(e) {\n      e.preventDefault();\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-db-status').hide();\n      WPStaging.ajax(\n          {\n            action: 'wpstg_database_connect',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            databaseUser: cache.get('#wpstg_db_username').val(),\n            databasePassword: cache.get('#wpstg_db_password').val(),\n            databaseServer: cache.get('#wpstg_db_server').val(),\n            databaseDatabase: cache.get('#wpstg_db_database').val(),\n            databasePrefix: cache.get('#wpstg_db_prefix').val(),\n          },\n          function(response) {\n            // Undefined Error\n            if (false === response) {\n              showError(\n                  'Something went wrong! Error: No response.' +\n                            'Please try again. If that does not help, ' +\n                            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n              );\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').remove();\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-failed\"> Failed</span>');\n              return;\n            }\n\n            // Throw Error\n            if ('undefined' !== typeof (response.errors) && response.errors) {\n              WPStaging.showError(\n                  'Something went wrong! Error: ' + response.errors +\n                            ' Please try again. If that does not help, ' +\n                            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n              );\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').hide();\n              cache.get('#wpstg-db-error').remove();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-failed\"> Failed</span><br/><span id=\"wpstg-db-error\" class=\"wpstg--red\">Error: ' + response.errors + '</span>');\n              return;\n            }\n\n            if ('undefined' !== typeof (response.success) && response.success) {\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').hide();\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-db-error').hide();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-success\"> Success</span>');\n            }\n          },\n          'json',\n          false,\n      );\n    });\n\n    // Make form fields editable\n    $workFlow.on('click', '#wpstg-ext-db', function() {\n      if (this.checked) {\n        cache.get('#wpstg_db_server').removeAttr('readonly');\n        cache.get('#wpstg_db_username').removeAttr('readonly');\n        cache.get('#wpstg_db_password').removeAttr('readonly');\n        cache.get('#wpstg_db_database').removeAttr('readonly');\n        cache.get('#wpstg_db_prefix').removeAttr('readonly');\n      } else {\n        cache.get('#wpstg_db_server').attr('readonly', true).val('');\n        cache.get('#wpstg_db_username').attr('readonly', true).val('');\n        cache.get('#wpstg_db_password').attr('readonly', true).val('');\n        cache.get('#wpstg_db_database').attr('readonly', true).val('');\n        cache.get('#wpstg_db_prefix').attr('readonly', true).val('');\n      }\n    });\n  };\n\n  const editCloneData = function() {\n    // Scan db and file system\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Load scanning data\n        .on('click', '.wpstg-edit-clone-data', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          // Disable button\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          // Get clone id\n          const cloneID = $(this).data('clone');\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_edit_clone_data',\n            clone: cloneID,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          // Send ajax request\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                $workFlow.html(response);\n              },\n              'HTML',\n          );\n        })\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          WPStaging.loadOverview();\n        })\n        .on('click', '#wpstg-save-clone-data', function(e) {\n          e.preventDefault();\n\n          const idPrefix = '#wpstg-edit-clone-data-';\n          const cloneID = cache.get(idPrefix + 'clone-id').val();\n          const cloneName = cache.get(idPrefix + 'clone-name').val();\n          const directoryName = cache.get(idPrefix + 'directory-name').val();\n          const path = cache.get(idPrefix + 'path').val();\n          const url = cache.get(idPrefix + 'url').val();\n          const prefix = cache.get(idPrefix + 'prefix').val();\n          const externalDBUser = cache.get(idPrefix + 'database-user').val();\n          const externalDBPassword = cache.get(idPrefix + 'database-password').val();\n          const externalDBDatabase = cache.get(idPrefix + 'database-database').val();\n          const externalDBHost = cache.get(idPrefix + 'database-server').val();\n          const externalDBPrefix = cache.get(idPrefix + 'database-prefix').val();\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_save_clone_data',\n            clone: cloneID,\n            cloneName: cloneName,\n            directoryName: directoryName,\n            path: path,\n            url: url,\n            prefix: prefix,\n            externalDBUser: externalDBUser,\n            externalDBPassword: externalDBPassword,\n            externalDBDatabase: externalDBDatabase,\n            externalDBHost: externalDBHost,\n            externalDBPrefix: externalDBPrefix,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                if (response === 'Success') {\n                  WPStaging.loadOverview();\n                } else {\n                  alert(response);\n                }\n              },\n              'HTML',\n          );\n        });\n  };\n\n  /**\n     * All jobs are finished\n     * @param {object} response\n     * @return object\n     */\n  var isFinished = function(response) {\n    progressBar(response);\n    cache.get('.wpstg-loader').text('Finished');\n    cache.get('.wpstg-loader').addClass('wpstg-finished');\n    cache.get('.wpstg-prev-step-link').attr('disabled', false);\n\n    WPStagingCommon.getSwalModal(true, {\n      confirmButton: 'wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width',\n      popup: 'wpstg-swal-popup wpstg-push-finished centered-modal',\n    }).fire({\n      title: 'Push successful!',\n      icon: 'success',\n      html: /* 'Go to <a href=\"options-permalink.php\">Permalinks</a> and save them again. <br>'+*/'Delete site cache if required!',\n      width: '500px',\n      focusConfirm: true,\n    });\n  };\n\n  /**\n     * Get Excluded (Unchecked) Database Tables\n     * @return {Array}\n     */\n  var getExcludedTables = function() {\n    const excludedTables = [];\n\n    $('.wpstg-db-table input:not(:checked)').each(function() {\n      excludedTables.push(this.name);\n    });\n\n    return excludedTables;\n  };\n\n\n  /**\n     * A confirmation modal\n     *\n     * @param html\n     * @param confirmText\n     * @param confirmButtonClass\n     * @return Promise\n     */\n  var confirmModal = function(title, html, confirmText, confirmButtonClass) {\n    return WPStagingCommon.getSwalModal(false, {\n      container: 'wpstg-swal-push-container',\n      confirmButton: confirmButtonClass + ' wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n    }).fire({\n      title: title,\n      icon: 'warning',\n      html: html,\n      width: '750px',\n      focusConfirm: false,\n      confirmButtonText: confirmText,\n      showCancelButton: true,\n    });\n  };\n\n  /**\n     * Get Included Directories\n     * @return {Array}\n     */\n  var getIncludedDirectories = function() {\n    const includedDirectories = [];\n\n    $('.wpstg-dir input:checked').each(function() {\n      const $this = $(this);\n      if (!$this.parent('.wpstg-dir').parents('.wpstg-dir').children('.wpstg-expand-dirs').hasClass('disabled')) {\n        includedDirectories.push($this.val());\n      }\n    });\n\n    return includedDirectories;\n  };\n\n  /**\n     * Get Excluded Directories\n     * @return {Array}\n     */\n  var getExcludedDirectories = function() {\n    const excludedDirectories = [];\n\n    $('.wpstg-dir input:not(:checked)').each(function() {\n      const $this = $(this);\n      excludedDirectories.push($this.val());\n    });\n\n    return excludedDirectories;\n  };\n\n  /**\n     * Get Included Extra Directories\n     * @return {Array}\n     */\n  var getIncludedExtraDirectories = function() {\n    var extraDirectories = [];\n\n    if (!$('#wpstg_extraDirectories').val()) {\n      return extraDirectories;\n    }\n\n    var extraDirectories = $('#wpstg_extraDirectories').val().split(/\\r?\\n/);\n\n    return extraDirectories;\n  };\n\n  var progressBar = function(response, restart) {\n    if ('undefined' === typeof (response.percentage)) {\n      return false;\n    }\n\n    if (response.job === 'JobCreateBackup') {\n      cache.get('#wpstg-progress-backup').width(response.percentage * 0.15 + '%').html(response.percentage + '%');\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 1 of 4 Creating backup...');\n    }\n\n    if (response.job === 'jobFileScanning' || response.job === 'jobCopy') {\n      cache.get('#wpstg-progress-backup').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-backup').html('1. Backup');\n      // Assumption: All previous steps are done.\n      // This avoids bugs where some steps are skipped and the progress bar is incomplete as a result\n      cache.get('#wpstg-progress-backup').width('15%');\n\n      let percentage;\n      if (response.job === 'jobFileScanning') {\n        percentage = response.percentage / 2;\n      } else {\n        percentage = 50 + response.percentage / 2;\n      }\n\n      cache.get('#wpstg-progress-files').width(percentage * 0.3 + '%').html(percentage.toFixed(0) + '%');\n      cache.get('#wpstg-processing-status').html(percentage.toFixed(0) + '%' + ' - Step 2 of 4 Copying files...');\n    }\n\n    if (response.job === 'jobCopyDatabaseTmp' || response.job === 'jobSearchReplace' || response.job === 'jobData') {\n      cache.get('#wpstg-progress-files').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-files').html('2. Files');\n      cache.get('#wpstg-progress-files').width('30%');\n\n      let percentage = 0;\n      if (response.job === 'jobCopyDatabaseTmp') {\n        percentage = response.percentage / 3;\n      } else if (response.job === 'jobSearchReplace') {\n        percentage = 100 / 3 + response.percentage / 3;\n      } else {\n        percentage = 200 / 3 + response.percentage / 3;\n      }\n\n      cache.get('#wpstg-progress-data').width(percentage * 0.4 + '%').html(percentage.toFixed(0) + '%');\n      cache.get('#wpstg-processing-status').html(percentage.toFixed(0) + '%' + ' - Step 3 of 4 Copying data...');\n    }\n    if (response.job === 'jobDatabaseRename') {\n      cache.get('#wpstg-progress-data').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-data').html('3. Data');\n      cache.get('#wpstg-progress-data').width('40%');\n\n      cache.get('#wpstg-progress-finishing').width(response.percentage * 0.15 + '%').html(response.percentage + '%');\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 4 of 4 Finishing migration...');\n    }\n    if (response.status === 'finished') {\n      cache.get('#wpstg-progress-finishing').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-finishing').html('4. Finishing migration');\n      cache.get('#wpstg-progress-finishing').width('15%');\n\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Pushing Process Finished');\n    }\n  };\n\n  that.init = function() {\n    startProcess();\n    startScanning();\n    connectDatabase();\n    editCloneData();\n    new WpstgCloneEdit();\n  };\n\n  return that;\n}(jQuery);\n\njQuery(document).ready(function($) {\n  WPStagingPro.init();\n\n  jQuery(document).on('click', '#wpstg-update-mail-settings', function(e) {\n    e.preventDefault();\n\n    $('#wpstg-update-mail-settings').attr('disabled', 'disabled');\n    const data = {\n      action: 'wpstg_update_staging_mail_settings',\n      emailsAllowed: $('#wpstg_allow_emails').is(':checked'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        WPStagingCommon.getSwalModal().fire(\n            'Unknown error',\n            'Please get in contact with us to solve it support@wp-staging.com',\n            'error',\n        );\n      },\n      success: function(response) {\n        let alertType = 'error';\n        if (response.success) {\n          alertType = 'success';\n        }\n\n        WPStagingCommon.getSwalModal().fire('', response.message, alertType).then(function() {\n          jQuery('.wpstg-mails-notice').slideUp('fast');\n        });\n        $('#wpstg-update-mail-settings').removeAttr('disabled');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          WPStagingCommon.getSwalModal().fire(\n              '404',\n              'Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com',\n              'error',\n          );\n        },\n        500: function() {\n          WPStagingCommon.getSwalModal().fire(\n              '500',\n              'Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com',\n              'error',\n          );\n        },\n      },\n    });\n  });\n});\n\n// export default {}\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    isEmpty: function(obj) {\n      for (const prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If a attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n"],"names":["qs","selector","document","querySelector","WpstgCloneEdit","workflowSelector","dbCheckTriggerClass","wpstgObject","databaseCheckAction","wpstg","workflow","dom","dbCheckTimer","abortDbCheckController","dbCheckCallStatus","notyf","Notyf","duration","position","x","y","dismissible","types","type","background","icon","init","addEvents","this","forEach","evt","parent","handler","addEventListener","event","target","matches","closest","_this","abort","clearTimeout","setTimeout","checkDatabase","idPrefix","externalDBUser","value","externalDBPassword","externalDBDatabase","externalDBHost","externalDBPrefix","AbortController","fetch","ajaxUrl","method","signal","credentials","body","URLSearchParams","action","accessToken","nonce","databaseUser","databasePassword","databaseServer","databaseDatabase","databasePrefix","databaseEnsurePrefixTableExist","headers","then","response","_this2","ok","json","Promise","reject","data","dismissAll","error","i18n","disabled","errors","success","open","message","console","warn","onOver","onOut","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","tracker","e","clientX","clientY","compare","el","Math","abs","undefined","dispatchOver","removeEventListener","onMouseOver","dispatchOut","delay","onMouseOut","onFocus","onBlur","removeFocus","opt","focusOptionChanged","Object","assign","remove","$","that","cache","processing","isFinished","getExcludedTables","confirmModal","getIncludedDirectories","getExcludedDirectories","getIncludedExtraDirectories","progressBar","WPStagingCommon","continueErrorHandle","elements","get","inArray","refresh","listenTooltip","wpstgHoverIntent","style","visibility","isEmpty","obj","prop","hasOwnProperty","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","Error","Array","length","shift","isLoading","show","hide","slugify","url","toString","toLowerCase","normalize","replace","showAjaxFatalError","prependMessage","appendMessage","showError","window","WPStaging","warnIfClosingDuringProcess","handleFetchErrors","status","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","incrementRatio","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","xhr","textStatus","errorThrown","log","errorCode","statusCode","jQuery","WPStagingPro","cloneID","deleteUploadsBeforePush","checked","backupUploadsBeforePush","clone","excludedTables","includedDirectories","excludedDirectories","extraDirectories","createBackupBeforePushing","deletePluginsAndThemes","deleteUploadsBeforePushing","backupUploadsBeforePushing","last_msg","getLogs","delayReq","job_done","addClass","attr","width","focusConfirm","each","push","name","confirmText","confirmButtonClass","container","confirmButtonText","$this","parents","children","hasClass","val","split","restart","percentage","job","toFixed","isCancelled","$workFlow","on","preventDefault","result","switchStep","loadOverview","getAttribute","currentTarget","removeAttr","after","connectDatabase","cloneName","directoryName","path","prefix","alert","editCloneData","ready","emailsAllowed","is","alertType","slideUp"],"mappings":"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"}