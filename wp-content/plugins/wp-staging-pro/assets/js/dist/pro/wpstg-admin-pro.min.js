!function(){"use strict";function t(t){return document.querySelector(t)}var e=function(){function e(e,s,r,a){void 0===e&&(e="#wpstg-workflow"),void 0===s&&(s=".wpstg-edit-clone-db-inputs"),void 0===r&&(r=wpstg),void 0===a&&(a="wpstg_database_connect"),this.workflow=t(e),this.dbCheckTriggerClass=s,this.wpstgObject=r,this.databaseCheckAction=a,this.dbCheckTimer=null,this.abortDbCheckController=null,this.dbCheckCallStatus=!1,this.notyf=new Notyf({duration:1e4,position:{x:"center",y:"bottom"},dismissible:!0,types:[{type:"warning",background:"orange",icon:!1}]}),this.init()}var s=e.prototype;return s.addEvents=function(){var t=this;null!==this.workflow&&["paste","input"].forEach((function(e){!function(t,e,s,r){t.addEventListener(e,(function(t){t.target.matches(s+", "+s+" *")&&r(t.target.closest(s),t)}),!1)}(t.workflow,e,t.dbCheckTriggerClass,(function(){!0===t.dbCheckCallStatus&&(t.abortDbCheckController.abort(),t.abortDbCheckController=null,t.dbCheckCallStatus=!1),clearTimeout(t.dbCheckTimer),t.dbCheckTimer=setTimeout((function(){t.checkDatabase()}),300)}))}))},s.init=function(){this.addEvents()},s.checkDatabase=function(){var e=this,s="#wpstg-edit-clone-data-",r=t(s+"database-user").value,a=t(s+"database-password").value,n=t(s+"database-database").value,o=t(s+"database-server").value,i=t(s+"database-prefix").value;""!==r||""!==a||""!==n||""!==i?(this.abortDbCheckController=new AbortController,this.dbCheckCallStatus=!0,fetch(this.wpstgObject.ajaxUrl,{method:"POST",signal:this.abortDbCheckController.signal,credentials:"same-origin",body:new URLSearchParams({action:this.databaseCheckAction,accessToken:this.wpstgObject.accessToken,nonce:this.wpstgObject.nonce,databaseUser:r,databasePassword:a,databaseServer:o,databaseDatabase:n,databasePrefix:i,databaseEnsurePrefixTableExist:!0}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){return e.dbCheckCallStatus=!1,t.ok?t.json():Promise.reject(t)})).then((function(s){return e.notyf.dismissAll(),!1===s?(e.notyf.error(e.wpstgObject.i18n.dbConnectionFailed),void(t("#wpstg-save-clone-data").disabled=!0)):void 0!==s.errors&&s.errors&&void 0!==s.success&&"false"===s.success?(e.notyf.error(e.wpstgObject.i18n.dbConnectionFailed+"! <br/> Error: "+s.errors),void(t("#wpstg-save-clone-data").disabled=!0)):void 0!==s.errors&&s.errors&&void 0!==s.success&&"true"===s.success?(e.notyf.open({type:"warning",message:"Warning: "+s.errors}),void(t("#wpstg-save-clone-data").disabled=!0)):void(void 0!==s.success&&s.success&&(e.notyf.success(e.wpstgObject.i18n.dbConnectionSuccess),t("#wpstg-save-clone-data").disabled=!1))})).catch((function(s){e.dbCheckCallStatus=!1,console.warn(e.wpstgObject.i18n.somethingWentWrong,s),t("#wpstg-save-clone-data").disabled=!0}))):t("#wpstg-save-clone-data").disabled=!1},e}();function s(t,e,s,r){var a,n,o,i,g=!1,c=!1,l={},p=0,d=0,u={sensitivity:7,interval:100,timeout:0,handleFocus:!1};function w(t){a=t.clientX,n=t.clientY}function h(t,e){if(d&&(d=clearTimeout(d)),Math.abs(o-a)+Math.abs(i-n)<u.sensitivity)return p=1,c?void 0:s(t,e);o=a,i=n,d=setTimeout((function(){h(t,e)}),u.interval)}function f(t,e){return g=!0,d&&(d=clearTimeout(d)),t.removeEventListener("mousemove",w,!1),1!==p&&(o=e.clientX,i=e.clientY,t.addEventListener("mousemove",w,!1),d=setTimeout((function(){h(t,e)}),u.interval)),this}function b(t){t.target.matches(e+", "+e+" *")&&f(t.target.closest(e),t)}function m(t,e){return g=!1,d&&(d=clearTimeout(d)),t.removeEventListener("mousemove",w,!1),1===p&&(d=setTimeout((function(){!function(t,e){d&&(d=clearTimeout(d)),p=0,c||r(t,e)}(t,e)}),u.timeout)),this}function v(t){t.target.matches(e+", "+e+" *")&&m(t.target.closest(e),t)}function k(t){var r,a;t.target.matches(e+", "+e+" *")&&(r=t.target.closest(e),a=t,g||(c=!0,s(r,a)))}function S(t){var s,a;t.target.matches(e+", "+e+" *")&&(s=t.target.closest(e),a=t,!g&&c&&(c=!1,r(s,a)))}function y(){t.removeEventListener("focus",k,!1),t.removeEventListener("blur",S,!1)}return l.options=function(e){var s=e.handleFocus!==u.handleFocus;return u=Object.assign({},u,e),s&&(u.handleFocus?(t.addEventListener("focus",k,!1),t.addEventListener("blur",S,!1)):y()),l},l.remove=function(){t&&(t.removeEventListener("mouseover",b,!1),t.removeEventListener("mouseout",v,!1),y())},t&&(t.addEventListener("mouseover",b,!1),t.addEventListener("mouseout",v,!1)),l}var r,a,n,o,i,g,c,l,p,d,u,w=function(t){var e={continueErrorHandle:!0,cache:{elements:[],get:function(e){return-1!==t.inArray(e,this.elements)||(this.elements[e]=t(e)),this.elements[e]},refresh:function(e){e.elements[e]=t(e)}},listenTooltip:function(){s(document,".wpstg--tooltip",(function(t,e){t.querySelector(".wpstg--tooltiptext").style.visibility="visible"}),(function(t,e){t.querySelector(".wpstg--tooltiptext").style.visibility="hidden"}))},isEmpty:function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},getSwalModal:function(t,e){void 0===t&&(t=!1),void 0===e&&(e={});var s={confirmButton:"wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width",cancelButton:"wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width",actions:"wpstg--modal--actions",popup:t?"wpstg-swal-popup centered-modal":"wpstg-swal-popup"},r={customClass:Object.assign(s,e),buttonsStyling:!1,reverseButtons:!0,showClass:{popup:"wpstg--swal2-show wpstg-swal-show"}};return wpstgSwal.mixin(r)},showSuccessModal:function(t){this.getSwalModal().fire({showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"OK",icon:"success",title:"Success!",html:'<div class="wpstg--grey" style="text-align: left; margin-top: 8px;">'+t+"</div>"})},showWarningModal:function(t){this.getSwalModal().fire({showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"OK",icon:"warning",title:"",html:'<div class="wpstg--grey" style="text-align: left; margin-top: 8px;">'+t+"</div>"})},showErrorModal:function(t){this.getSwalModal().fire({showConfirmButton:!1,showCancelButton:!0,cancelButtonText:"OK",icon:"error",title:"Error!",html:'<div class="wpstg--grey" style="text-align: left; margin-top: 8px;">'+t+"</div>"})},getSwalContainer:function(){return wpstgSwal.getContainer()},closeSwalModal:function(){wpstgSwal.close()},getDataFromWordPressResponse:function(t){if("object"!=typeof t)throw new Error("Unexpected response (ERR 1341)");if(!t.hasOwnProperty("success"))throw new Error("Unexpected response (ERR 1342)");if(!t.hasOwnProperty("data"))throw new Error("Unexpected response (ERR 1343)");if(!1===t.success)throw t.data instanceof Array&&t.data.length>0?new Error(t.data.shift()):new Error("Response was not successful");return t.data},isLoading:function(t){t&&!1!==t?e.cache.get(".wpstg-loader").show():e.cache.get(".wpstg-loader").hide()},slugify:function(t){return t.toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^a-z0-9\-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")},showAjaxFatalError:function(t,s,r){return s=s?s+"<br/><br/>":"Something went wrong! <br/><br/>",r=r?r+"<br/><br/>":"<br/><br/>Please try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.",!1===t?(e.showError(s+" Error: No response."+r),void window.removeEventListener("beforeunload",WPStaging.warnIfClosingDuringProcess)):void 0!==t.error&&t.error?(e.showError(s+" Error: "+t.message+r),void window.removeEventListener("beforeunload",WPStaging.warnIfClosingDuringProcess)):void 0},handleFetchErrors:function(t){return t.ok||e.showError("Error: "+t.status+" - "+t.statusText+". Please try again or contact support."),t},showError:function(s){e.cache.get("#wpstg-try-again").css("display","inline-block"),e.cache.get("#wpstg-cancel-cloning").text("Reset"),e.cache.get("#wpstg-resume-cloning").show(),e.cache.get("#wpstg-error-wrapper").show(),e.cache.get("#wpstg-error-details").show().html(s),e.cache.get("#wpstg-removing-clone").removeClass("loading"),e.cache.get(".wpstg-loader").hide(),t(".wpstg--modal--process--generic-problem").show().html(s)},resetErrors:function(){e.cache.get("#wpstg-error-details").hide().html("")},ajax:function(s,r,a,n,o,i,g){void 0===i&&(i=null),void 0===g&&(g=null),void 0===a&&(a="json"),!1!==n&&(n=!0);var c=10,l=1e4*(o=void 0===o?0:o);i=parseInt(i),isNaN(i)||(l*=i),t.ajax({url:ajaxurl+"?action=wpstg_processing&_="+Date.now()/1e3,type:"POST",dataType:a,cache:!1,data:s,error:function(t,p,d){if(console.log(t.status+" "+t.statusText+"---"+p),"function"!=typeof g||(g(t,p,d),e.continueErrorHandle))if(++o<=c)setTimeout((function(){e.ajax(s,r,a,n,o,i)}),l);else{var u=void 0===t.status?"Unknown":t.status;e.showError("Fatal Error:  "+u+" Please try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.")}else e.continueErrorHandle=!0},success:function(t){"function"==typeof r&&r(t)},statusCode:{404:function(){o>=c&&e.showError("Error 404 - Can't find ajax request URL! Please try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.")},500:function(){o>=c&&e.showError("Fatal Error 500 - Internal server error while processing the request! Please try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.")},504:function(){o>c&&e.showError("Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.\n ")},502:function(){o>=c&&e.showError("Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.\n ")},503:function(){o>=c&&e.showError("Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.\n ")},429:function(){o>=c&&e.showError("Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href='https://wp-staging.com/docs/wp-staging-settings-for-small-servers/' target='_blank'>WP Staging Small Server Settings</a> or submit an error report and contact us.\n ")},403:function(){o>=c&&e.showError("Refresh page or login again! The process should be finished successfully. \n ")}}})}};return e}(jQuery),h=(r=jQuery,n={elements:[],get:function(t){return-1!==r.inArray(t,n.elements)||(n.elements[t]=jQuery(t)),n.elements[t]},refresh:function(t){t.elements[t]=jQuery(t)}},o=function t(){n.get(".wpstg-loader").show(),n.get(".wpstg-log-details").show();var e=n.get("#wpstg-push-changes").data("clone"),s=n.get("#wpstg-delete-upload-before-pushing")[0].checked,r=!1;s&&(r=n.get("#wpstg-backup-upload-before-pushing")[0].checked),WPStaging.ajax({action:"wpstg_push_processing",accessToken:wpstg.accessToken,nonce:wpstg.nonce,clone:e,excludedTables:g(),includedDirectories:l(),excludedDirectories:p(),extraDirectories:d(),createBackupBeforePushing:n.get("#wpstg-create-backup-before-pushing")[0].checked,deletePluginsAndThemes:n.get("#wpstg-remove-uninstalled-plugins-themes")[0].checked,deleteUploadsBeforePushing:s,backupUploadsBeforePushing:r},(function(e){return!1===e?(showError("Something went wrong! Error: No response.  Go to WP Staging > Settings and lower 'File Copy Limit' and 'DB Query Limit'. Also set 'CPU Load Priority to low 'and try again. If that does not help, <a href='https://wp-staging.com/support/' target='_blank'>open a support ticket</a> "),n.get(".wpstg-loader").hide(),void window.removeEventListener("beforeunload",WPStaging.warnIfClosingDuringProcess)):void 0!==e.error&&e.error?(WPStaging.showError("Something went wrong! Error: "+e.message+".  Go to WP Staging > Settings and lower 'File Copy Limit' and 'DB Query Limit'. Also set 'CPU Load Priority to low 'and try again. If that does not help, <a href='https://wp-staging.com/support/' target='_blank'>open a support ticket</a> "),void window.removeEventListener("beforeunload",WPStaging.warnIfClosingDuringProcess)):(void 0!==e.last_msg&&e.last_msg&&WPStaging.getLogs(e.last_msg),void(!1===e.status?(u(e),setTimeout((function(){n.get(".wpstg-loader").show(),t()}),wpstg.delayReq)):!0===e.status?(u(e),t()):("finished"===e.status||void 0!==e.job_done&&e.job_done)&&(window.removeEventListener("beforeunload",WPStaging.warnIfClosingDuringProcess),i(e))))}),"json",!1)},i=function(t){u(t),n.get(".wpstg-loader").text("Finished"),n.get(".wpstg-loader").addClass("wpstg-finished"),n.get(".wpstg-prev-step-link").attr("disabled",!1),w.getSwalModal(!0,{confirmButton:"wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width",popup:"wpstg-swal-popup wpstg-push-finished centered-modal"}).fire({title:"Push successful!",icon:"success",html:"Delete site cache if required!",width:"500px",focusConfirm:!0})},g=function(){var t=[];return r(".wpstg-db-table input:not(:checked)").each((function(){t.push(this.name)})),t},c=function(t,e,s,r){return w.getSwalModal(!1,{container:"wpstg-swal-push-container",confirmButton:r+" wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn"}).fire({title:t,icon:"warning",html:e,width:"750px",focusConfirm:!1,confirmButtonText:s,showCancelButton:!0})},l=function(){var t=[];return r(".wpstg-dir input:checked").each((function(){var e=r(this);e.parent(".wpstg-dir").parents(".wpstg-dir").children(".wpstg-expand-dirs").hasClass("disabled")||t.push(e.val())})),t},p=function(){var t=[];return r(".wpstg-dir input:not(:checked)").each((function(){var e=r(this);t.push(e.val())})),t},d=function(){var t=[];return r("#wpstg_extraDirectories").val()?t=r("#wpstg_extraDirectories").val().split(/\r?\n/):t},u=function(t,e){if(void 0===t.percentage)return!1;var s;if("JobCreateBackup"===t.job&&(n.get("#wpstg-progress-backup").width(.15*t.percentage+"%").html(t.percentage+"%"),n.get("#wpstg-processing-status").html(t.percentage.toFixed(0)+"% - Step 1 of 4 Creating backup...")),("jobFileScanning"===t.job||"jobCopy"===t.job)&&(n.get("#wpstg-progress-backup").css("background-color","#3bc36b"),n.get("#wpstg-progress-backup").html("1. Backup"),n.get("#wpstg-progress-backup").width("15%"),s="jobFileScanning"===t.job?t.percentage/2:50+t.percentage/2,n.get("#wpstg-progress-files").width(.3*s+"%").html(s.toFixed(0)+"%"),n.get("#wpstg-processing-status").html(s.toFixed(0)+"% - Step 2 of 4 Copying files...")),"jobCopyDatabaseTmp"===t.job||"jobSearchReplace"===t.job||"jobData"===t.job){n.get("#wpstg-progress-files").css("background-color","#3bc36b"),n.get("#wpstg-progress-files").html("2. Files"),n.get("#wpstg-progress-files").width("30%");var r=0;r="jobCopyDatabaseTmp"===t.job?t.percentage/3:"jobSearchReplace"===t.job?100/3+t.percentage/3:200/3+t.percentage/3,n.get("#wpstg-progress-data").width(.4*r+"%").html(r.toFixed(0)+"%"),n.get("#wpstg-processing-status").html(r.toFixed(0)+"% - Step 3 of 4 Copying data...")}"jobDatabaseRename"===t.job&&(n.get("#wpstg-progress-data").css("background-color","#3bc36b"),n.get("#wpstg-progress-data").html("3. Data"),n.get("#wpstg-progress-data").width("40%"),n.get("#wpstg-progress-finishing").width(.15*t.percentage+"%").html(t.percentage+"%"),n.get("#wpstg-processing-status").html(t.percentage.toFixed(0)+"% - Step 4 of 4 Finishing migration...")),"finished"===t.status&&(n.get("#wpstg-progress-finishing").css("background-color","#3bc36b"),n.get("#wpstg-progress-finishing").html("4. Finishing migration"),n.get("#wpstg-progress-finishing").width("15%"),n.get("#wpstg-processing-status").html(t.percentage.toFixed(0)+"% - Pushing Process Finished"))},(a={isCancelled:!1,isFinished:!1,getLogs:!1}).init=function(){var t;n.get("#wpstg-workflow").on("click","#wpstg-push-changes",(function(t){t.preventDefault(),n.get(".wpstg-tabs-wrapper").hide(),n.get("#wpstg-push-changes").hide();var e=n.get("#wpstg-push-changes").data("clone");c("Confirm Push!","<p class='wpstg-push-confirmation-message'><b>WAIT!</b> This will overwrite the production/live site and its plugins, themes and media assets with data from the staging site: <b>\""+e+"\"</b>.  <br/><br/>Database data will be overwritten for each selected table. Take care if you use a shop system like WooCommerce and check out our FAQ! <br/><br/><b>IMPORTANT:</b> Before you proceed make sure that you have a full site backup. If the pushing process is not successful contact us at <a href='mailto:support@wp-staging.com'>support@wp-staging.com</a> or use the <b>REPORT ISSUE</b> button.</p>","Push","wpstg-confirm-push").then((function(t){if(t.value)return n.get("#wpstg-push-changes").attr("disabled",!0),n.get(".wpstg-prev-step-link").attr("disabled",!0),n.get("#wpstg-scanning-files").hide(),n.get(".wpstg-progress-bar-wrapper").show(),WPStaging.switchStep(3),window.addEventListener("beforeunload",WPStaging.warnIfClosingDuringProcess),void o();n.get(".wpstg-tabs-wrapper").show(),n.get("#wpstg-push-changes").show()}))})),(t=n.get("#wpstg-workflow")).on("click",".wpstg-push-changes",(function(e){if(e.preventDefault(),r(this).attr("disabled"))return!1;t.addClass("loading");var s=r(this).data("clone");a.data={action:"wpstg_scan",clone:s,accessToken:wpstg.accessToken,nonce:wpstg.nonce},WPStaging.ajax(a.data,(function(e){e.length<1&&showError("Something went wrong! No response.  Go to WP Staging > Settings and lower 'File Copy Limit' and 'DB Query Limit'. Also set 'CPU Load Priority to low 'and try again. If that does not help, <a href='https://wp-staging.com/support/' target='_blank'>open a support ticket</a> "),t.removeClass("loading").html(e),WPStaging.switchStep(2),n.get(".wpstg-step3-cloning").hide(),n.get(".wpstg-step3-pushing").show(),n.get(".wpstg-loader").hide()}),"HTML")})).on("click",".wpstg-prev-step-link",(function(t){t.preventDefault(),WPStaging.loadOverview()})).on("click","#wpstg-use-target-dir",(function(t){t.preventDefault(),r("#wpstg_clone_dir").val(this.getAttribute("data-path"))})).on("click","#wpstg-use-target-hostname",(function(t){t.preventDefault(),r("#wpstg_clone_hostname").val(this.getAttribute("data-uri"))})).on("change","#wpstg-delete-upload-before-pushing",(function(t){t.currentTarget.checked?r("#wpstg-backup-upload-container").show():(r("#wpstg-backup-upload-container").hide(),r("#wpstg-backup-upload-before-pushing").removeAttr("checked"))})),function(){var t=n.get("#wpstg-workflow");t.on("click","#wpstg-db-connect",(function(t){t.preventDefault(),n.get(".wpstg-loader").show(),n.get("#wpstg-db-status").hide(),WPStaging.ajax({action:"wpstg_database_connect",accessToken:wpstg.accessToken,nonce:wpstg.nonce,databaseUser:n.get("#wpstg_db_username").val(),databasePassword:n.get("#wpstg_db_password").val(),databaseServer:n.get("#wpstg_db_server").val(),databaseDatabase:n.get("#wpstg_db_database").val(),databasePrefix:n.get("#wpstg_db_prefix").val()},(function(t){return!1===t?(showError("Something went wrong! Error: No response.Please try again. If that does not help, <a href='https://wp-staging.com/support/' target='_blank'>open a support ticket</a> "),n.get(".wpstg-loader").hide(),n.get("#wpstg-db-status").remove(),n.get("#wpstg-error-details").hide(),void n.get("#wpstg-db-connect").after('<span id="wpstg-db-status" class="wpstg-failed"> Failed</span>')):void 0!==t.errors&&t.errors?(WPStaging.showError("Something went wrong! Error: "+t.errors+" Please try again. If that does not help, <a href='https://wp-staging.com/support/' target='_blank'>open a support ticket</a> "),n.get(".wpstg-loader").hide(),n.get("#wpstg-db-status").hide(),n.get("#wpstg-db-error").remove(),void n.get("#wpstg-db-connect").after('<span id="wpstg-db-status" class="wpstg-failed"> Failed</span><br/><span id="wpstg-db-error" class="wpstg--red">Error: '+t.errors+"</span>")):void(void 0!==t.success&&t.success&&(n.get(".wpstg-loader").hide(),n.get("#wpstg-db-status").hide(),n.get("#wpstg-error-details").hide(),n.get("#wpstg-db-error").hide(),n.get("#wpstg-db-connect").after('<span id="wpstg-db-status" class="wpstg-success"> Success</span>')))}),"json",!1)})),t.on("click","#wpstg-ext-db",(function(){this.checked?(n.get("#wpstg_db_server").removeAttr("readonly"),n.get("#wpstg_db_username").removeAttr("readonly"),n.get("#wpstg_db_password").removeAttr("readonly"),n.get("#wpstg_db_database").removeAttr("readonly"),n.get("#wpstg_db_prefix").removeAttr("readonly")):(n.get("#wpstg_db_server").attr("readonly",!0).val(""),n.get("#wpstg_db_username").attr("readonly",!0).val(""),n.get("#wpstg_db_password").attr("readonly",!0).val(""),n.get("#wpstg_db_database").attr("readonly",!0).val(""),n.get("#wpstg_db_prefix").attr("readonly",!0).val(""))}))}(),function(){var t=n.get("#wpstg-workflow");t.on("click",".wpstg-edit-clone-data",(function(e){if(e.preventDefault(),r(this).attr("disabled"))return!1;var s=r(this).data("clone");a.data={action:"wpstg_edit_clone_data",clone:s,accessToken:wpstg.accessToken,nonce:wpstg.nonce},WPStaging.ajax(a.data,(function(e){t.html(e)}),"HTML")})).on("click",".wpstg-prev-step-link",(function(t){t.preventDefault(),WPStaging.loadOverview()})).on("click","#wpstg-save-clone-data",(function(t){t.preventDefault();var e="#wpstg-edit-clone-data-",s=n.get(e+"clone-id").val(),r=n.get(e+"clone-name").val(),o=n.get(e+"directory-name").val(),i=n.get(e+"path").val(),g=n.get(e+"url").val(),c=n.get(e+"prefix").val(),l=n.get(e+"database-user").val(),p=n.get(e+"database-password").val(),d=n.get(e+"database-database").val(),u=n.get(e+"database-server").val(),w=n.get(e+"database-prefix").val();a.data={action:"wpstg_save_clone_data",clone:s,cloneName:r,directoryName:o,path:i,url:g,prefix:c,externalDBUser:l,externalDBPassword:p,externalDBDatabase:d,externalDBHost:u,externalDBPrefix:w,accessToken:wpstg.accessToken,nonce:wpstg.nonce},WPStaging.ajax(a.data,(function(t){"Success"===t?WPStaging.loadOverview():alert(t)}),"HTML")}))}(),new e},a);jQuery(document).ready((function(t){h.init(),jQuery(document).on("click","#wpstg-update-mail-settings",(function(e){e.preventDefault(),t("#wpstg-update-mail-settings").attr("disabled","disabled");var s={action:"wpstg_update_staging_mail_settings",emailsAllowed:t("#wpstg_allow_emails").is(":checked"),accessToken:wpstg.accessToken,nonce:wpstg.nonce};jQuery.ajax({url:ajaxurl,type:"POST",data:s,error:function(t,e,s){w.getSwalModal().fire("Unknown error","Please get in contact with us to solve it support@wp-staging.com","error")},success:function(e){var s="error";return e.success&&(s="success"),w.getSwalModal().fire("",e.message,s).then((function(){jQuery(".wpstg-mails-notice").slideUp("fast")})),t("#wpstg-update-mail-settings").removeAttr("disabled"),!0},statusCode:{404:function(){w.getSwalModal().fire("404","Something went wrong; can't find ajax request URL! Please get in contact with us to solve it support@wp-staging.com","error")},500:function(){w.getSwalModal().fire("500","Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com","error")}}})}))}))}();
//# sourceMappingURL=wpstg-admin-pro.min.js.map
