{"version":3,"file":"wpstg-admin-pro.js","sources":["../../src/modules/wpstg-dom-utils.js","../../src/pro/modules/wpstg-clone-edit.js","../../src/modules/wpstg-hover-intent.js","../../src/wpstg.js","../../src/pro/wpstg-admin-pro.js"],"sourcesContent":["/**\n * WP STAGING basic jQuery replacement\n */\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return single element only\n */\nexport function qs(selector) {\n  return document.querySelector(selector);\n}\n\n/**\n * Shortcut for document.querySelector() or jQuery's $()\n * Return collection of elements\n */\nexport function all(selector) {\n  return document.querySelectorAll(selector);\n}\n\n/**\n * alternative of jQuery - $(parent).on(event, selector, handler)\n */\nexport function addEvent(parent, evt, selector, handler) {\n  parent.addEventListener(evt, function(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      handler(event.target.closest(selector), event);\n    }\n  }, false);\n}\n\nexport function slideDown(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = '0px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = height + 'px';\n    window.setTimeout(() => {\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function slideUp(element, duration = 400) {\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  const height = element.offsetHeight;\n  element.style.height = height + 'px';\n  element.style.transitionProperty = 'height';\n  element.style.transitionDuration = duration + 'ms';\n  setTimeout(() => {\n    element.style.height = '0px';\n    window.setTimeout(() => {\n      element.style.display = 'none';\n      element.style.removeProperty('height');\n      element.style.removeProperty('overflow');\n      element.style.removeProperty('transition-duration');\n      element.style.removeProperty('transition-property');\n    }, duration);\n  }, 0);\n}\n\nexport function getNextSibling(element, selector) {\n  let sibling = element.nextElementSibling;\n\n  while (sibling) {\n    if (sibling.matches(selector)) {\n      return sibling;\n    }\n\n    sibling = sibling.nextElementSibling;\n  }\n};\n\nexport function getParents(element, selector) {\n  const result = [];\n  for (let parent = element && element.parentElement; parent; parent = parent.parentElement) {\n    if (parent.matches(selector)) {\n      result.push(parent);\n    }\n  }\n\n  return result;\n}\n\n/**\n * Check if element has class name\n * @param element\n * @param className\n * @return {boolean}\n */\nexport function hasClass(element, className) {\n  return (' ' + element.className + ' ').indexOf(' ' + className+ ' ') > -1;\n}\n","\nimport * as dom from './../../modules/wpstg-dom-utils.js';\n\n// Delay time in millisecond after which the request is send to check db connection\n// This is to make sure we have not many ajax request even when they were not required i.e. while typing.\nexport const DELAY_TIME_DB_CHECK = 300;\nexport default class WpstgCloneEdit {\n  constructor(\n      workflowSelector = '#wpstg-workflow',\n      dbCheckTriggerClass = '.wpstg-edit-clone-db-inputs',\n      wpstgObject = wpstg,\n      databaseCheckAction = 'wpstg_database_connect',\n  ) {\n    this.workflow = dom.qs(workflowSelector);\n    this.dbCheckTriggerClass = dbCheckTriggerClass;\n    this.wpstgObject = wpstgObject;\n    this.databaseCheckAction = databaseCheckAction;\n    this.dbCheckTimer = null;\n    this.abortDbCheckController = null;\n    this.dbCheckCallStatus = false;\n    this.notyf = new Notyf({\n      duration: 10000,\n      position: {\n        x: 'center',\n        y: 'bottom',\n      },\n      dismissible: true,\n      types: [\n        {\n          type: 'warning',\n          background: 'orange',\n          icon: false,\n        },\n      ],\n    });\n    this.init();\n  }\n\n  addEvents() {\n    // early bail if workflow object not available.\n    if (this.workflow === null) {\n      return;\n    }\n\n    ['paste', 'input'].forEach( (evt) => {\n      dom.addEvent(this.workflow, evt, this.dbCheckTriggerClass, () => {\n        // abort previous database check call if it was running\n        if (this.dbCheckCallStatus === true) {\n          this.abortDbCheckController.abort();\n          this.abortDbCheckController = null;\n          this.dbCheckCallStatus = false;\n        }\n\n        // check for db connection after specific delay but reset the timer if these event occur again\n        clearTimeout(this.dbCheckTimer);\n        this.dbCheckTimer = setTimeout(() => {\n          this.checkDatabase();\n        }, DELAY_TIME_DB_CHECK);\n      });\n    });\n  }\n\n  init() {\n    this.addEvents();\n  }\n\n  checkDatabase() {\n    const idPrefix = '#wpstg-edit-clone-data-';\n    const externalDBUser = dom.qs(idPrefix + 'database-user').value;\n    const externalDBPassword = dom.qs(idPrefix + 'database-password').value;\n    const externalDBDatabase = dom.qs(idPrefix + 'database-database').value;\n    const externalDBHost = dom.qs(idPrefix + 'database-server').value;\n    const externalDBPrefix = dom.qs(idPrefix + 'database-prefix').value;\n\n    if (externalDBUser === '' && externalDBPassword === '' && externalDBDatabase === '' && externalDBPrefix === '') {\n      dom.qs('#wpstg-save-clone-data').disabled = false;\n      return;\n    }\n\n    this.abortDbCheckController = new AbortController();\n    this.dbCheckCallStatus = true;\n\n    fetch(this.wpstgObject.ajaxUrl, {\n      method: 'POST',\n      signal: this.abortDbCheckController.signal,\n      credentials: 'same-origin',\n      body: new URLSearchParams({\n        action: this.databaseCheckAction,\n        accessToken: this.wpstgObject.accessToken,\n        nonce: this.wpstgObject.nonce,\n        databaseUser: externalDBUser,\n        databasePassword: externalDBPassword,\n        databaseServer: externalDBHost,\n        databaseDatabase: externalDBDatabase,\n        databasePrefix: externalDBPrefix,\n        databaseEnsurePrefixTableExist: true,\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    }).then((response) => {\n      this.dbCheckCallStatus = false;\n      if (response.ok) {\n        return response.json();\n      }\n\n      return Promise.reject(response);\n    }).then((data) => {\n      // dismiss previous toasts\n      this.notyf.dismissAll();\n      // failed request\n      if (false === data) {\n        this.notyf.error(this.wpstgObject.i18n['dbConnectionFailed']);\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // failed db connection\n      if ('undefined' !== typeof (data.errors) && data.errors && 'undefined' !== typeof (data.success) && data.success === 'false') {\n        this.notyf.error(this.wpstgObject.i18n['dbConnectionFailed'] +'! <br/> Error: '+ data.errors);\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // prefix warning\n      if ('undefined' !== typeof (data.errors) && data.errors && 'undefined' !== typeof (data.success) && data.success === 'true') {\n        this.notyf.open({\n          type: 'warning',\n          message: 'Warning: ' + data.errors,\n        });\n        dom.qs('#wpstg-save-clone-data').disabled = true;\n        return;\n      }\n\n      // db connection successful\n      if ('undefined' !== typeof (data.success) && data.success) {\n        this.notyf.success(this.wpstgObject.i18n['dbConnectionSuccess']);\n        dom.qs('#wpstg-save-clone-data').disabled = false;\n      }\n    }).catch((error) => {\n      this.dbCheckCallStatus = false;\n      console.warn(this.wpstgObject.i18n['somethingWentWrong'], error);\n      dom.qs('#wpstg-save-clone-data').disabled = true;\n    });\n  }\n}\n","'use strict';\n\n/**\n * This is a namespaced port of https://github.com/tristen/hoverintent,\n * with slight modification to accept selector with dynamically added element in dom,\n * instead of just already present element.\n *\n * @param {HTMLElement} parent\n * @param {string} selector\n * @param {CallableFunction} onOver\n * @param {CallableFunction} onOut\n *\n * @return {object}\n */\nexport default function(parent, selector, onOver, onOut) {\n  let x; let y; let pX; let pY;\n  let mouseOver = false;\n  let focused = false;\n  const h = {};\n  let state = 0;\n  let timer = 0;\n\n  let options = {\n    sensitivity: 7,\n    interval: 100,\n    timeout: 0,\n    handleFocus: false,\n  };\n\n  function delay(el, e) {\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    state = 0;\n    return focused ? undefined : onOut(el, e);\n  }\n\n  function tracker(e) {\n    x = e.clientX;\n    y = e.clientY;\n  }\n\n  function compare(el, e) {\n    if (timer) timer = clearTimeout(timer);\n    if ((Math.abs(pX - x) + Math.abs(pY - y)) < options.sensitivity) {\n      state = 1;\n      return focused ? undefined : onOver(el, e);\n    } else {\n      pX = x;\n      pY = y;\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n  }\n\n  // Public methods\n  h.options = function(opt) {\n    const focusOptionChanged = opt.handleFocus !== options.handleFocus;\n    options = Object.assign({}, options, opt);\n    if (focusOptionChanged) {\n            options.handleFocus ? addFocus() : removeFocus();\n    }\n\n    return h;\n  };\n\n  function dispatchOver(el, e) {\n    mouseOver = true;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state !== 1) {\n      pX = e.clientX;\n      pY = e.clientY;\n\n      el.addEventListener('mousemove', tracker, false);\n\n      timer = setTimeout(function() {\n        compare(el, e);\n      }, options.interval);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOver to support dynamically added elements to dom\n   */\n  function onMouseOver(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOver(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchOut(el, e) {\n    mouseOver = false;\n    if (timer) {\n      timer = clearTimeout(timer);\n    }\n\n    el.removeEventListener('mousemove', tracker, false);\n\n    if (state === 1) {\n      timer = setTimeout(function() {\n        delay(el, e);\n      }, options.timeout);\n    }\n\n    return this;\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchOut to support dynamically added elements to dom\n   */\n  function onMouseOut(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchOut(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchFocus(el, e) {\n    if (!mouseOver) {\n      focused = true;\n      onOver(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchFocus to support dynamically added elements to dom\n   */\n  function onFocus(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchFocus(event.target.closest(selector), event);\n    }\n  };\n\n  function dispatchBlur(el, e) {\n    if (!mouseOver && focused) {\n      focused = false;\n      onOut(el, e);\n    }\n  }\n\n  /**\n   * Newly added method,\n   * A wrapper around dispatchBlur to support dynamically added elements to dom\n   */\n  function onBlur(event) {\n    if (event.target.matches(selector + ', ' + selector + ' *')) {\n      dispatchBlur(event.target.closest(selector), event);\n    }\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function addFocus() {\n    parent.addEventListener('focus', onFocus, false);\n    parent.addEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  function removeFocus() {\n    parent.removeEventListener('focus', onFocus, false);\n    parent.removeEventListener('blur', onBlur, false);\n  }\n\n  /**\n   * Modified to support dynamically added element\n   */\n  h.remove = function() {\n    if (!parent) {\n      return;\n    }\n\n    parent.removeEventListener('mouseover', onMouseOver, false);\n    parent.removeEventListener('mouseout', onMouseOut, false);\n    removeFocus();\n  };\n\n  /**\n   * Modified to support dynamically added element\n   */\n  if (parent) {\n    parent.addEventListener('mouseover', onMouseOver, false);\n    parent.addEventListener('mouseout', onMouseOut, false);\n  }\n\n  return h;\n};\n","import wpstgHoverIntent from './modules/wpstg-hover-intent';\n\nexport default (function($) {\n  const WPStagingCommon = {\n    continueErrorHandle: true,\n    cache: {\n      elements: [],\n      get: function(selector) {\n        // It is already cached!\n        if ($.inArray(selector, this.elements) !== -1) {\n          return this.elements[selector];\n        }\n\n        // Create cache and return\n        this.elements[selector] = $(selector);\n\n        return this.elements[selector];\n      },\n      refresh: function(selector) {\n        selector.elements[selector] = $(selector);\n      },\n    },\n    listenTooltip: function() {\n      wpstgHoverIntent(document, '.wpstg--tooltip', function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'visible';\n      }, function(target, event) {\n        target.querySelector('.wpstg--tooltiptext').style.visibility = 'hidden';\n      });\n    },\n    isEmpty: function(obj) {\n      for (const prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    // Get the custom themed Swal Modal for WP Staging\n    // Easy to maintain now in one place now\n    getSwalModal: function(isContentCentered = false, customClasses = {}) {\n      // common style for all swal modal used in WP Staging\n      const defaultCustomClasses = {\n        confirmButton: 'wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn wpstg-100-width',\n        cancelButton: 'wpstg--btn--cancel wpstg-blue-primary wpstg-link-btn wpstg-100-width',\n        actions: 'wpstg--modal--actions',\n        popup: isContentCentered ? 'wpstg-swal-popup centered-modal' : 'wpstg-swal-popup',\n      };\n\n      // If a attribute exists in both default and additional attributes,\n      // The class(es) of the additional attribute will overrite the default one.\n      const options = {\n        customClass: Object.assign(defaultCustomClasses, customClasses),\n        buttonsStyling: false,\n        reverseButtons: true,\n        showClass: {\n          popup: 'wpstg--swal2-show wpstg-swal-show',\n        },\n      };\n\n      return wpstgSwal.mixin(options);\n    },\n    showSuccessModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'success',\n        title: 'Success!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showWarningModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'warning',\n        title: '',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    showErrorModal: function(htmlContent) {\n      this.getSwalModal().fire({\n        showConfirmButton: false,\n        showCancelButton: true,\n        cancelButtonText: 'OK',\n        icon: 'error',\n        title: 'Error!',\n        html: '<div class=\"wpstg--grey\" style=\"text-align: left; margin-top: 8px;\">' + htmlContent + '</div>',\n      });\n    },\n    getSwalContainer: function() {\n      return wpstgSwal.getContainer();\n    },\n    closeSwalModal: function() {\n      wpstgSwal.close();\n    },\n    /**\n     * Treats a default response object generated by WordPress's\n     * wp_send_json_success() or wp_send_json_error() functions in\n     * PHP, parses it in JavaScript, and either throws if it's an error,\n     * or returns the data if the response is successful.\n     *\n     * @param {object} response\n     * @return {*}\n     */\n    getDataFromWordPressResponse(response) {\n      if (typeof response !== 'object') {\n        throw new Error('Unexpected response (ERR 1341)');\n      }\n\n      if (!response.hasOwnProperty('success')) {\n        throw new Error('Unexpected response (ERR 1342)');\n      }\n\n      if (!response.hasOwnProperty('data')) {\n        throw new Error('Unexpected response (ERR 1343)');\n      }\n\n      if (response.success === false) {\n        if (response.data instanceof Array && response.data.length > 0) {\n          throw new Error(response.data.shift());\n        } else {\n          throw new Error('Response was not successful');\n        }\n      } else {\n        // Successful response. Return the data.\n        return response.data;\n      }\n    },\n    isLoading: function(isLoading) {\n      if (!isLoading || isLoading === false) {\n        WPStagingCommon.cache.get('.wpstg-loader').hide();\n      } else {\n        WPStagingCommon.cache.get('.wpstg-loader').show();\n      }\n    },\n    /**\n     * Convert the given url to make it slug compatible\n     * @param {string} url\n     */\n    slugify: function(url) {\n      return url.toString()\n          .toLowerCase()\n          .normalize('NFD')\n          .replace(/[\\u0300-\\u036f]/g, '')\n          .replace(/\\s+/g, '-')\n          .replace(/&/g, '-and-')\n          .replace(/[^a-z0-9\\-]/g, '')\n          .replace(/-+/g, '-')\n          .replace(/^-*/, '')\n          .replace(/-*$/, '')\n      ;\n    },\n    showAjaxFatalError: function(response, prependMessage, appendMessage) {\n      prependMessage = prependMessage ? prependMessage + '<br/><br/>' : 'Something went wrong! <br/><br/>';\n      appendMessage = appendMessage ? appendMessage + '<br/><br/>' : '<br/><br/>Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.';\n\n      if (response === false) {\n        WPStagingCommon.showError(prependMessage + ' Error: No response.' + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n\n      if (typeof response.error !== 'undefined' && response.error) {\n        WPStagingCommon.showError(prependMessage + ' Error: ' + response.message + appendMessage);\n        window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n        return;\n      }\n    },\n    handleFetchErrors: function(response) {\n      if (!response.ok) {\n        WPStagingCommon.showError('Error: ' + response.status + ' - ' + response.statusText + '. Please try again or contact support.');\n      }\n      return response;\n    },\n    showError: function(message) {\n      WPStagingCommon.cache.get('#wpstg-try-again').css('display', 'inline-block');\n      WPStagingCommon.cache.get('#wpstg-cancel-cloning').text('Reset');\n      WPStagingCommon.cache.get('#wpstg-resume-cloning').show();\n      WPStagingCommon.cache.get('#wpstg-error-wrapper').show();\n      WPStagingCommon.cache.get('#wpstg-error-details').show().html(message);\n      WPStagingCommon.cache.get('#wpstg-removing-clone').removeClass('loading');\n      WPStagingCommon.cache.get('.wpstg-loader').hide();\n      $('.wpstg--modal--process--generic-problem').show().html(message);\n    },\n    resetErrors: function() {\n      WPStagingCommon.cache.get('#wpstg-error-details').hide().html('');\n    },\n    /**\n     * Ajax Requests\n     * @param {Object} data\n     * @param {Function} callback\n     * @param {string} dataType\n     * @param {bool} showErrors\n     * @param {int} tryCount\n     * @param {float} incrementRatio\n     * @param errorCallback\n     */\n    ajax: function(data, callback, dataType, showErrors, tryCount, incrementRatio = null, errorCallback = null) {\n      if ('undefined' === typeof (dataType)) {\n        dataType = 'json';\n      }\n\n      if (false !== showErrors) {\n        showErrors = true;\n      }\n\n      tryCount = 'undefined' === typeof (tryCount) ? 0 : tryCount;\n\n      const retryLimit = 10;\n\n      let retryTimeout = 10000 * tryCount;\n\n      incrementRatio = parseInt(incrementRatio);\n      if (!isNaN(incrementRatio)) {\n        retryTimeout *= incrementRatio;\n      }\n\n      $.ajax({\n        url: ajaxurl + '?action=wpstg_processing&_=' + (Date.now() / 1000),\n        type: 'POST',\n        dataType: dataType,\n        cache: false,\n        data: data,\n        error: function(xhr, textStatus, errorThrown) {\n          console.log(xhr.status + ' ' + xhr.statusText + '---' + textStatus);\n\n          if (typeof (errorCallback) === 'function') {\n            // Custom error handler\n            errorCallback(xhr, textStatus, errorThrown);\n\n            if (!WPStagingCommon.continueErrorHandle) {\n              // Reset state\n              WPStagingCommon.continueErrorHandle = true;\n\n              return;\n            }\n          }\n\n          // Default error handler\n          tryCount++;\n          if (tryCount <= retryLimit) {\n            setTimeout(function() {\n              WPStagingCommon.ajax(data, callback, dataType, showErrors, tryCount, incrementRatio);\n              return;\n            }, retryTimeout);\n          } else {\n            const errorCode = 'undefined' === typeof (xhr.status) ? 'Unknown' : xhr.status;\n            WPStagingCommon.showError(\n                'Fatal Error:  ' + errorCode + ' Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.',\n            );\n          }\n        },\n        success: function(data) {\n          if ('function' === typeof (callback)) {\n            callback(data);\n          }\n        },\n        statusCode: {\n          404: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 404 - Can\\'t find ajax request URL! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          500: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Fatal Error 500 - Internal server error while processing the request! Please try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.');\n            }\n          },\n          504: function() {\n            if (tryCount > retryLimit) {\n              WPStagingCommon.showError('Error 504 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          502: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 502 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          503: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 503 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          429: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Error 429 - It looks like your server is rate limiting ajax requests. Please try to resume after a minute. If this still not works try the <a href=\\'https://wp-staging.com/docs/wp-staging-settings-for-small-servers/\\' target=\\'_blank\\'>WP Staging Small Server Settings</a> or submit an error report and contact us.\\n\\ ');\n            }\n          },\n          403: function() {\n            if (tryCount >= retryLimit) {\n              WPStagingCommon.showError('Refresh page or login again! The process should be finished successfully. \\n\\ ');\n            }\n          },\n        },\n      });\n    },\n  };\n\n  return WPStagingCommon;\n})(jQuery);\n","import WpstgCloneEdit from './modules/wpstg-clone-edit.js';\nimport WPStagingCommon from '../wpstg.js';\n\nconst WPStagingPro = function($) {\n  const that = {\n    isCancelled: false,\n    isFinished: false,\n    getLogs: false,\n  };\n\n  // Cache Elements\n  const cache = {elements: []};\n\n  /**\n     * Get / Set Cache for Selector\n     * @param {String} selector\n     * @return {*}\n     */\n  cache.get = function(selector) {\n    // It is already cached!\n    if ($.inArray(selector, cache.elements) !== -1) {\n      return cache.elements[selector];\n    }\n\n    // Create cache and return\n    cache.elements[selector] = jQuery(selector);\n\n    return cache.elements[selector];\n  };\n\n  /**\n     * Refreshes given cache\n     * @param {String} selector\n     */\n  cache.refresh = function(selector) {\n    selector.elements[selector] = jQuery(selector);\n  };\n\n\n  /**\n     * Ajax Scanning before starting push process\n     */\n  const startScanning = function() {\n    // Scan db and file system\n    const $workFlow = cache.get('#wpstg-workflow');\n\n\n    $workFlow\n    // Load scanning data\n        .on('click', '.wpstg-push-changes', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          // Disable button\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          // Add loading overlay\n          $workFlow.addClass('loading');\n\n          // Get clone id\n          // var cloneID = $this.data(\"clone\");\n          // Get clone id\n          const cloneID = $(this).data('clone');\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_scan',\n            clone: cloneID,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          // Send ajax request\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                if (response.length < 1) {\n                  showError(\n                      'Something went wrong! No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                                'and try again. If that does not help, ' +\n                                '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n                  );\n                }\n\n                // Styling of elements\n                $workFlow.removeClass('loading').html(response);\n\n                WPStaging.switchStep(2);\n\n                cache.get('.wpstg-step3-cloning').hide();\n                cache.get('.wpstg-step3-pushing').show();\n\n                cache.get('.wpstg-loader').hide();\n                // cache.get(\".wpstg-loader\").hide();\n              },\n              'HTML',\n          );\n        })\n    // Previous Button\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          WPStaging.loadOverview();\n        })\n        .on('click', '#wpstg-use-target-dir', function(e) {\n          e.preventDefault();\n          $('#wpstg_clone_dir').val(this.getAttribute('data-path'));\n        })\n        .on('click', '#wpstg-use-target-hostname', function(e) {\n          e.preventDefault();\n          $('#wpstg_clone_hostname').val(this.getAttribute('data-uri'));\n        })\n        .on('change', '#wpstg-delete-upload-before-pushing', function(e) {\n          if (e.currentTarget.checked) {\n            $('#wpstg-backup-upload-container').show();\n          } else {\n            $('#wpstg-backup-upload-container').hide();\n            $('#wpstg-backup-upload-before-pushing').removeAttr('checked');\n          }\n        });\n  };\n\n\n  // Start the whole pushing process\n  const startProcess = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    // Click push changes button\n    $workFlow.on('click', '#wpstg-push-changes', function(e) {\n      e.preventDefault();\n\n      // Hide db tables and folder selection\n      cache.get('.wpstg-tabs-wrapper').hide();\n      cache.get('#wpstg-push-changes').hide();\n\n      // Show confirmation modal\n      const cloneID = cache.get('#wpstg-push-changes').data('clone');\n      const html = '<p class=\\'wpstg-push-confirmation-message\\'><b>WAIT!</b> This will overwrite the production/live site and its plugins, themes and media assets with data from the staging site: <b>\"' + cloneID + '\"</b>.  <br/><br/>Database data will be overwritten for each selected table. Take care if you use a shop system like WooCommerce and check out our FAQ! <br/><br/><b>IMPORTANT:</b> Before you proceed make sure that you have a full site backup. If the pushing process is not successful contact us at <a href=\\'mailto:support@wp-staging.com\\'>support@wp-staging.com</a> or use the <b>REPORT ISSUE</b> button.</p>';\n\n      confirmModal('Confirm Push!', html, 'Push', 'wpstg-confirm-push').then(function(result) {\n        if (result.value) {\n          cache.get('#wpstg-push-changes').attr('disabled', true);\n          cache.get('.wpstg-prev-step-link').attr('disabled', true);\n          cache.get('#wpstg-scanning-files').hide();\n          cache.get('.wpstg-progress-bar-wrapper').show();\n          WPStaging.switchStep(3);\n          window.addEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n          processing();\n\n          return;\n        }\n\n        // Show db tables and folder selection\n        cache.get('.wpstg-tabs-wrapper').show();\n        cache.get('#wpstg-push-changes').show();\n      });\n    });\n  };\n\n  /**\n     * Start ajax processing\n     * @return string\n     */\n  var processing = function() {\n    // Show loader gif\n    cache.get('.wpstg-loader').show();\n\n    // Show logging window\n    cache.get('.wpstg-log-details').show();\n\n    // Get clone id\n    const cloneID = cache.get('#wpstg-push-changes').data('clone');\n\n    const deleteUploadsBeforePush = cache.get('#wpstg-delete-upload-before-pushing')[0].checked;\n    let backupUploadsBeforePush = false;\n    if (deleteUploadsBeforePush) {\n      backupUploadsBeforePush = cache.get('#wpstg-backup-upload-before-pushing')[0].checked;\n    }\n\n    WPStaging.ajax(\n        {\n          action: 'wpstg_push_processing',\n          accessToken: wpstg.accessToken,\n          nonce: wpstg.nonce,\n          clone: cloneID,\n          excludedTables: getExcludedTables(),\n          includedDirectories: getIncludedDirectories(),\n          excludedDirectories: getExcludedDirectories(),\n          extraDirectories: getIncludedExtraDirectories(),\n          createBackupBeforePushing: cache.get('#wpstg-create-backup-before-pushing')[0].checked,\n          deletePluginsAndThemes: cache.get('#wpstg-remove-uninstalled-plugins-themes')[0].checked,\n          deleteUploadsBeforePushing: deleteUploadsBeforePush,\n          backupUploadsBeforePushing: backupUploadsBeforePush,\n        },\n        function(response) {\n          // Undefined Error\n          if (false === response) {\n            showError(\n                'Something went wrong! Error: No response.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                        'and try again. If that does not help, ' +\n                        '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            cache.get('.wpstg-loader').hide();\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n\n          // Throw Error\n          if ('undefined' !== typeof (response.error) && response.error) {\n            WPStaging.showError(\n                'Something went wrong! Error: ' + response.message + '.  Go to WP Staging > Settings and lower \\'File Copy Limit\\' and \\'DB Query Limit\\'. Also set \\'CPU Load Priority to low \\'' +\n                        'and try again. If that does not help, ' +\n                        '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n            );\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            return;\n          }\n\n          // Add Log messages\n          if ('undefined' !== typeof (response.last_msg) && response.last_msg) {\n            WPStaging.getLogs(response.last_msg);\n          }\n\n          // Continue processing\n          if (false === response.status) {\n            progressBar(response);\n            setTimeout(function() {\n              cache.get('.wpstg-loader').show();\n              processing();\n            }, wpstg.delayReq);\n          } else if (true === response.status) {\n            progressBar(response);\n            processing();\n          } else if ('finished' === response.status || ('undefined' !== typeof (response.job_done) && response.job_done)) {\n            window.removeEventListener('beforeunload', WPStaging.warnIfClosingDuringProcess);\n            isFinished(response);\n          }\n        },\n        'json',\n        false,\n    );\n  };\n\n  /**\n     * Test database connection\n     * @return object\n     */\n  const connectDatabase = function() {\n    const $workFlow = cache.get('#wpstg-workflow');\n    $workFlow.on('click', '#wpstg-db-connect', function(e) {\n      e.preventDefault();\n      cache.get('.wpstg-loader').show();\n      cache.get('#wpstg-db-status').hide();\n      WPStaging.ajax(\n          {\n            action: 'wpstg_database_connect',\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n            databaseUser: cache.get('#wpstg_db_username').val(),\n            databasePassword: cache.get('#wpstg_db_password').val(),\n            databaseServer: cache.get('#wpstg_db_server').val(),\n            databaseDatabase: cache.get('#wpstg_db_database').val(),\n            databasePrefix: cache.get('#wpstg_db_prefix').val(),\n          },\n          function(response) {\n            // Undefined Error\n            if (false === response) {\n              showError(\n                  'Something went wrong! Error: No response.' +\n                            'Please try again. If that does not help, ' +\n                            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n              );\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').remove();\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-failed\"> Failed</span>');\n              return;\n            }\n\n            // Throw Error\n            if ('undefined' !== typeof (response.errors) && response.errors) {\n              WPStaging.showError(\n                  'Something went wrong! Error: ' + response.errors +\n                            ' Please try again. If that does not help, ' +\n                            '<a href=\\'https://wp-staging.com/support/\\' target=\\'_blank\\'>open a support ticket</a> ',\n              );\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').hide();\n              cache.get('#wpstg-db-error').remove();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-failed\"> Failed</span><br/><span id=\"wpstg-db-error\" class=\"wpstg--red\">Error: ' + response.errors + '</span>');\n              return;\n            }\n\n            if ('undefined' !== typeof (response.success) && response.success) {\n              cache.get('.wpstg-loader').hide();\n              cache.get('#wpstg-db-status').hide();\n              cache.get('#wpstg-error-details').hide();\n              cache.get('#wpstg-db-error').hide();\n              cache.get('#wpstg-db-connect').after('<span id=\"wpstg-db-status\" class=\"wpstg-success\"> Success</span>');\n            }\n          },\n          'json',\n          false,\n      );\n    });\n\n    // Make form fields editable\n    $workFlow.on('click', '#wpstg-ext-db', function() {\n      if (this.checked) {\n        cache.get('#wpstg_db_server').removeAttr('readonly');\n        cache.get('#wpstg_db_username').removeAttr('readonly');\n        cache.get('#wpstg_db_password').removeAttr('readonly');\n        cache.get('#wpstg_db_database').removeAttr('readonly');\n        cache.get('#wpstg_db_prefix').removeAttr('readonly');\n      } else {\n        cache.get('#wpstg_db_server').attr('readonly', true).val('');\n        cache.get('#wpstg_db_username').attr('readonly', true).val('');\n        cache.get('#wpstg_db_password').attr('readonly', true).val('');\n        cache.get('#wpstg_db_database').attr('readonly', true).val('');\n        cache.get('#wpstg_db_prefix').attr('readonly', true).val('');\n      }\n    });\n  };\n\n  const editCloneData = function() {\n    // Scan db and file system\n    const $workFlow = cache.get('#wpstg-workflow');\n\n    $workFlow\n    // Load scanning data\n        .on('click', '.wpstg-edit-clone-data', function(e) {\n          e.preventDefault();\n\n          const $this = $(this);\n\n          // Disable button\n          if ($this.attr('disabled')) {\n            return false;\n          }\n\n          // Get clone id\n          const cloneID = $(this).data('clone');\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_edit_clone_data',\n            clone: cloneID,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          // Send ajax request\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                $workFlow.html(response);\n              },\n              'HTML',\n          );\n        })\n        .on('click', '.wpstg-prev-step-link', function(e) {\n          e.preventDefault();\n          WPStaging.loadOverview();\n        })\n        .on('click', '#wpstg-save-clone-data', function(e) {\n          e.preventDefault();\n\n          const idPrefix = '#wpstg-edit-clone-data-';\n          const cloneID = cache.get(idPrefix + 'clone-id').val();\n          const cloneName = cache.get(idPrefix + 'clone-name').val();\n          const directoryName = cache.get(idPrefix + 'directory-name').val();\n          const path = cache.get(idPrefix + 'path').val();\n          const url = cache.get(idPrefix + 'url').val();\n          const prefix = cache.get(idPrefix + 'prefix').val();\n          const externalDBUser = cache.get(idPrefix + 'database-user').val();\n          const externalDBPassword = cache.get(idPrefix + 'database-password').val();\n          const externalDBDatabase = cache.get(idPrefix + 'database-database').val();\n          const externalDBHost = cache.get(idPrefix + 'database-server').val();\n          const externalDBPrefix = cache.get(idPrefix + 'database-prefix').val();\n\n          // Prepare data\n          that.data = {\n            action: 'wpstg_save_clone_data',\n            clone: cloneID,\n            cloneName: cloneName,\n            directoryName: directoryName,\n            path: path,\n            url: url,\n            prefix: prefix,\n            externalDBUser: externalDBUser,\n            externalDBPassword: externalDBPassword,\n            externalDBDatabase: externalDBDatabase,\n            externalDBHost: externalDBHost,\n            externalDBPrefix: externalDBPrefix,\n            accessToken: wpstg.accessToken,\n            nonce: wpstg.nonce,\n          };\n\n          WPStaging.ajax(\n              that.data,\n              function(response) {\n                if (response === 'Success') {\n                  WPStaging.loadOverview();\n                } else {\n                  alert(response);\n                }\n              },\n              'HTML',\n          );\n        });\n  };\n\n  /**\n     * All jobs are finished\n     * @param {object} response\n     * @return object\n     */\n  var isFinished = function(response) {\n    progressBar(response);\n    cache.get('.wpstg-loader').text('Finished');\n    cache.get('.wpstg-loader').addClass('wpstg-finished');\n    cache.get('.wpstg-prev-step-link').attr('disabled', false);\n\n    WPStagingCommon.getSwalModal(true, {\n      confirmButton: 'wpstg--btn--confirm wpstg-green-button wpstg-button wpstg-link-btn wpstg-100-width',\n      popup: 'wpstg-swal-popup wpstg-push-finished centered-modal',\n    }).fire({\n      title: 'Push successful!',\n      icon: 'success',\n      html: /* 'Go to <a href=\"options-permalink.php\">Permalinks</a> and save them again. <br>'+*/'Delete site cache if required!',\n      width: '500px',\n      focusConfirm: true,\n    });\n  };\n\n  /**\n     * Get Excluded (Unchecked) Database Tables\n     * @return {Array}\n     */\n  var getExcludedTables = function() {\n    const excludedTables = [];\n\n    $('.wpstg-db-table input:not(:checked)').each(function() {\n      excludedTables.push(this.name);\n    });\n\n    return excludedTables;\n  };\n\n\n  /**\n     * A confirmation modal\n     *\n     * @param html\n     * @param confirmText\n     * @param confirmButtonClass\n     * @return Promise\n     */\n  var confirmModal = function(title, html, confirmText, confirmButtonClass) {\n    return WPStagingCommon.getSwalModal(false, {\n      container: 'wpstg-swal-push-container',\n      confirmButton: confirmButtonClass + ' wpstg--btn--confirm wpstg-blue-primary wpstg-button wpstg-link-btn',\n    }).fire({\n      title: title,\n      icon: 'warning',\n      html: html,\n      width: '750px',\n      focusConfirm: false,\n      confirmButtonText: confirmText,\n      showCancelButton: true,\n    });\n  };\n\n  /**\n     * Get Included Directories\n     * @return {Array}\n     */\n  var getIncludedDirectories = function() {\n    const includedDirectories = [];\n\n    $('.wpstg-dir input:checked').each(function() {\n      const $this = $(this);\n      if (!$this.parent('.wpstg-dir').parents('.wpstg-dir').children('.wpstg-expand-dirs').hasClass('disabled')) {\n        includedDirectories.push($this.val());\n      }\n    });\n\n    return includedDirectories;\n  };\n\n  /**\n     * Get Excluded Directories\n     * @return {Array}\n     */\n  var getExcludedDirectories = function() {\n    const excludedDirectories = [];\n\n    $('.wpstg-dir input:not(:checked)').each(function() {\n      const $this = $(this);\n      excludedDirectories.push($this.val());\n    });\n\n    return excludedDirectories;\n  };\n\n  /**\n     * Get Included Extra Directories\n     * @return {Array}\n     */\n  var getIncludedExtraDirectories = function() {\n    var extraDirectories = [];\n\n    if (!$('#wpstg_extraDirectories').val()) {\n      return extraDirectories;\n    }\n\n    var extraDirectories = $('#wpstg_extraDirectories').val().split(/\\r?\\n/);\n\n    return extraDirectories;\n  };\n\n  var progressBar = function(response, restart) {\n    if ('undefined' === typeof (response.percentage)) {\n      return false;\n    }\n\n    if (response.job === 'JobCreateBackup') {\n      cache.get('#wpstg-progress-backup').width(response.percentage * 0.15 + '%').html(response.percentage + '%');\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 1 of 4 Creating backup...');\n    }\n\n    if (response.job === 'jobFileScanning' || response.job === 'jobCopy') {\n      cache.get('#wpstg-progress-backup').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-backup').html('1. Backup');\n      // Assumption: All previous steps are done.\n      // This avoids bugs where some steps are skipped and the progress bar is incomplete as a result\n      cache.get('#wpstg-progress-backup').width('15%');\n\n      let percentage;\n      if (response.job === 'jobFileScanning') {\n        percentage = response.percentage / 2;\n      } else {\n        percentage = 50 + response.percentage / 2;\n      }\n\n      cache.get('#wpstg-progress-files').width(percentage * 0.3 + '%').html(percentage.toFixed(0) + '%');\n      cache.get('#wpstg-processing-status').html(percentage.toFixed(0) + '%' + ' - Step 2 of 4 Copying files...');\n    }\n\n    if (response.job === 'jobCopyDatabaseTmp' || response.job === 'jobSearchReplace' || response.job === 'jobData') {\n      cache.get('#wpstg-progress-files').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-files').html('2. Files');\n      cache.get('#wpstg-progress-files').width('30%');\n\n      let percentage = 0;\n      if (response.job === 'jobCopyDatabaseTmp') {\n        percentage = response.percentage / 3;\n      } else if (response.job === 'jobSearchReplace') {\n        percentage = 100 / 3 + response.percentage / 3;\n      } else {\n        percentage = 200 / 3 + response.percentage / 3;\n      }\n\n      cache.get('#wpstg-progress-data').width(percentage * 0.4 + '%').html(percentage.toFixed(0) + '%');\n      cache.get('#wpstg-processing-status').html(percentage.toFixed(0) + '%' + ' - Step 3 of 4 Copying data...');\n    }\n    if (response.job === 'jobDatabaseRename') {\n      cache.get('#wpstg-progress-data').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-data').html('3. Data');\n      cache.get('#wpstg-progress-data').width('40%');\n\n      cache.get('#wpstg-progress-finishing').width(response.percentage * 0.15 + '%').html(response.percentage + '%');\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Step 4 of 4 Finishing migration...');\n    }\n    if (response.status === 'finished') {\n      cache.get('#wpstg-progress-finishing').css('background-color', '#3bc36b');\n      cache.get('#wpstg-progress-finishing').html('4. Finishing migration');\n      cache.get('#wpstg-progress-finishing').width('15%');\n\n      cache.get('#wpstg-processing-status').html(response.percentage.toFixed(0) + '%' + ' - Pushing Process Finished');\n    }\n  };\n\n  that.init = function() {\n    startProcess();\n    startScanning();\n    connectDatabase();\n    editCloneData();\n    new WpstgCloneEdit();\n  };\n\n  return that;\n}(jQuery);\n\njQuery(document).ready(function($) {\n  WPStagingPro.init();\n\n  jQuery(document).on('click', '#wpstg-update-mail-settings', function(e) {\n    e.preventDefault();\n\n    $('#wpstg-update-mail-settings').attr('disabled', 'disabled');\n    const data = {\n      action: 'wpstg_update_staging_mail_settings',\n      emailsAllowed: $('#wpstg_allow_emails').is(':checked'),\n      accessToken: wpstg.accessToken,\n      nonce: wpstg.nonce,\n    };\n\n    jQuery.ajax({\n      url: ajaxurl,\n      type: 'POST',\n      data: data,\n      error: function(xhr, textStatus, errorThrown) {\n        WPStagingCommon.getSwalModal().fire(\n            'Unknown error',\n            'Please get in contact with us to solve it support@wp-staging.com',\n            'error',\n        );\n      },\n      success: function(response) {\n        let alertType = 'error';\n        if (response.success) {\n          alertType = 'success';\n        }\n\n        WPStagingCommon.getSwalModal().fire('', response.message, alertType).then(function() {\n          jQuery('.wpstg-mails-notice').slideUp('fast');\n        });\n        $('#wpstg-update-mail-settings').removeAttr('disabled');\n        return true;\n      },\n      statusCode: {\n        404: function() {\n          WPStagingCommon.getSwalModal().fire(\n              '404',\n              'Something went wrong; can\\'t find ajax request URL! Please get in contact with us to solve it support@wp-staging.com',\n              'error',\n          );\n        },\n        500: function() {\n          WPStagingCommon.getSwalModal().fire(\n              '500',\n              'Something went wrong; internal server error while processing the request! Please get in contact with us to solve it support@wp-staging.com',\n              'error',\n          );\n        },\n      },\n    });\n  });\n});\n\n// export default {}\n"],"names":["qs","selector","document","querySelector","addEvent","parent","evt","handler","addEventListener","event","target","matches","closest","DELAY_TIME_DB_CHECK","WpstgCloneEdit","workflowSelector","dbCheckTriggerClass","wpstgObject","databaseCheckAction","wpstg","workflow","dom","dbCheckTimer","abortDbCheckController","dbCheckCallStatus","notyf","Notyf","duration","position","x","y","dismissible","types","type","background","icon","init","addEvents","forEach","abort","clearTimeout","setTimeout","checkDatabase","idPrefix","externalDBUser","value","externalDBPassword","externalDBDatabase","externalDBHost","externalDBPrefix","disabled","AbortController","fetch","ajaxUrl","method","signal","credentials","body","URLSearchParams","action","accessToken","nonce","databaseUser","databasePassword","databaseServer","databaseDatabase","databasePrefix","databaseEnsurePrefixTableExist","headers","then","response","ok","json","Promise","reject","data","dismissAll","error","i18n","errors","success","open","message","console","warn","onOver","onOut","pX","pY","mouseOver","focused","h","state","timer","options","sensitivity","interval","timeout","handleFocus","delay","el","e","undefined","tracker","clientX","clientY","compare","Math","abs","opt","focusOptionChanged","Object","assign","addFocus","removeFocus","dispatchOver","removeEventListener","onMouseOver","dispatchOut","onMouseOut","dispatchFocus","onFocus","dispatchBlur","onBlur","remove","$","WPStagingCommon","continueErrorHandle","cache","elements","get","inArray","refresh","listenTooltip","wpstgHoverIntent","style","visibility","isEmpty","obj","prop","hasOwnProperty","getSwalModal","isContentCentered","customClasses","defaultCustomClasses","confirmButton","cancelButton","actions","popup","customClass","buttonsStyling","reverseButtons","showClass","wpstgSwal","mixin","showSuccessModal","htmlContent","fire","showConfirmButton","showCancelButton","cancelButtonText","title","html","showWarningModal","showErrorModal","getSwalContainer","getContainer","closeSwalModal","close","getDataFromWordPressResponse","Error","Array","length","shift","isLoading","hide","show","slugify","url","toString","toLowerCase","normalize","replace","showAjaxFatalError","prependMessage","appendMessage","showError","window","WPStaging","warnIfClosingDuringProcess","handleFetchErrors","status","statusText","css","text","removeClass","resetErrors","ajax","callback","dataType","showErrors","tryCount","incrementRatio","errorCallback","retryLimit","retryTimeout","parseInt","isNaN","ajaxurl","Date","now","xhr","textStatus","errorThrown","log","errorCode","statusCode","jQuery","WPStagingPro","that","isCancelled","isFinished","getLogs","startScanning","$workFlow","on","preventDefault","$this","attr","addClass","cloneID","clone","switchStep","loadOverview","val","getAttribute","currentTarget","checked","removeAttr","startProcess","confirmModal","result","processing","deleteUploadsBeforePush","backupUploadsBeforePush","excludedTables","getExcludedTables","includedDirectories","getIncludedDirectories","excludedDirectories","getExcludedDirectories","extraDirectories","getIncludedExtraDirectories","createBackupBeforePushing","deletePluginsAndThemes","deleteUploadsBeforePushing","backupUploadsBeforePushing","last_msg","progressBar","delayReq","job_done","connectDatabase","after","editCloneData","cloneName","directoryName","path","prefix","alert","width","focusConfirm","each","push","name","confirmText","confirmButtonClass","container","confirmButtonText","parents","children","hasClass","split","restart","percentage","job","toFixed","ready","emailsAllowed","is","alertType","slideUp"],"mappings":"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"}